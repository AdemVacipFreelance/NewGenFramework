var _divFrame, _divUploadMessage, _divUploadProgress, _ifrPhoto, _photoUploadProgressTimer, PROGRESS_INTERVAL = 150, PROGRESS_COLOR = "#000080", _loopCounter = 1, _maxLoop = 10; function initPhotoUpload() { _divFrame = document.getElementById("divFrame"), _divUploadMessage = document.getElementById("divUploadMessage"), _divUploadProgress = document.getElementById("divUploadProgress"), (_ifrPhoto = document.getElementById("ifrPhoto")).contentWindow.document.getElementById("btnUpload").onclick = function (o) { var e = _ifrPhoto.contentWindow.document.getElementById("filPhoto"); if (_divUploadMessage.style.display = "none", 0 === e.value.length) return _divUploadMessage.innerHTML = '<span style="color:#ff0000">Lütfen dosyanızı seçiniz.</span>', _divUploadMessage.style.display = "", void e.focus(); if (!/^(([a-zA-Z]:)|(\\{2}\w+)\$?)(\\(\w[\w].*))(.jpg|.JPG|.gif|.GIF|.png|.PNG|.bmp|.BMP)$/.test(e.value)) return _divUploadMessage.innerHTML = '<span style="color:#ff0000">Geçersiz dosya biçimi. Desteklenen dosya biçimleri jpg, gif, png ve bmp.</span>', _divUploadMessage.style.display = "", void e.focus(); beginPhotoUploadProgress(), _ifrPhoto.contentWindow.document.getElementById("photoUpload").submit(), _divFrame.style.display = "none" } } function beginPhotoUploadProgress() { _divUploadProgress.style.display = "", clearPhotoUploadProgress(), _photoUploadProgressTimer = setTimeout(updatePhotoUploadProgress, PROGRESS_INTERVAL) } function clearPhotoUploadProgress() { for (var o = 1; o <= _maxLoop; o++)document.getElementById("tdProgress" + o).style.backgroundColor = "transparent"; document.getElementById("tdProgress1").style.backgroundColor = PROGRESS_COLOR, _loopCounter = 1 } function updatePhotoUploadProgress() { (_loopCounter += 1) <= _maxLoop ? document.getElementById("tdProgress" + _loopCounter).style.backgroundColor = PROGRESS_COLOR : clearPhotoUploadProgress(), _photoUploadProgressTimer && clearTimeout(_photoUploadProgressTimer), _photoUploadProgressTimer = setTimeout(updatePhotoUploadProgress, PROGRESS_INTERVAL) } function photoUploadComplete(o, e) { if (clearPhotoUploadProgress(), _photoUploadProgressTimer && clearTimeout(_photoUploadProgressTimer), _divUploadProgress.style.display = "none", _divUploadMessage.style.display = "none", _divFrame.style.display = "", o.length) { var t = e ? "#ff0000" : "#008000"; _divUploadMessage.innerHTML = '<span style="color:' + t + ';font-weight:bold">' + o + "</span>", _divUploadMessage.style.display = "", e && _ifrPhoto.contentWindow.document.getElementById("filPhoto").focus() } }